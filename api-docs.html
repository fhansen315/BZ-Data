<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BZ-Data API Documentation</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet">
    <style>
        .endpoint-card {
            border-left: 4px solid #0066CC;
            margin-bottom: 1.5rem;
        }
        .method-badge {
            font-size: 0.75rem;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-weight: bold;
        }
        .method-get { background-color: #28a745; color: white; }
        .method-post { background-color: #007bff; color: white; }
        .method-put { background-color: #ffc107; color: black; }
        .method-delete { background-color: #dc3545; color: white; }
        .code-block {
            background-color: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 6px;
            padding: 1rem;
            margin: 1rem 0;
        }
        .sidebar {
            position: sticky;
            top: 20px;
            height: calc(100vh - 40px);
            overflow-y: auto;
        }
        .nav-link {
            color: #495057;
            border-radius: 6px;
            margin-bottom: 0.25rem;
        }
        .nav-link:hover, .nav-link.active {
            background-color: #e9ecef;
            color: #0066CC;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <nav class="navbar navbar-dark bg-primary">
        <div class="container-fluid">
            <span class="navbar-brand">
                <i class="bi bi-code-slash"></i>
                BZ-Data API Documentation
            </span>
            <span class="navbar-text">
                Version 1.0.0
            </span>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <div class="col-md-3 col-lg-2 bg-light">
                <div class="sidebar p-3">
                    <h6 class="text-muted mb-3">NAVIGATION</h6>
                    <nav class="nav flex-column">
                        <a class="nav-link active" href="#overview">Overview</a>
                        <a class="nav-link" href="#authentication">Authentication</a>
                        <a class="nav-link" href="#endpoints">Endpoints</a>
                        <a class="nav-link" href="#data">Data Endpoints</a>
                        <a class="nav-link" href="#analytics">Analytics</a>
                        <a class="nav-link" href="#realtime">Real-time</a>
                        <a class="nav-link" href="#examples">Examples</a>
                        <a class="nav-link" href="#errors">Error Handling</a>
                        <a class="nav-link" href="#sdks">SDKs</a>
                    </nav>
                </div>
            </div>

            <!-- Main Content -->
            <div class="col-md-9 col-lg-10">
                <div class="p-4">
                    <!-- Overview -->
                    <section id="overview" class="mb-5">
                        <h1>BZ-Data API</h1>
                        <p class="lead">RESTful API for accessing FX modality analytics, risk metrics, and real-time data.</p>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-body">
                                        <h5 class="card-title">Base URL</h5>
                                        <code>http://localhost:8000</code>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-body">
                                        <h5 class="card-title">Response Format</h5>
                                        <code>application/json</code>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Authentication -->
                    <section id="authentication" class="mb-5">
                        <h2>Authentication</h2>
                        <p>Currently, the API does not require authentication. In production, you would typically use API keys or OAuth.</p>
                        
                        <div class="alert alert-info">
                            <i class="bi bi-info-circle"></i>
                            <strong>Development Mode:</strong> No authentication required for local development.
                        </div>
                    </section>

                    <!-- Endpoints Overview -->
                    <section id="endpoints" class="mb-5">
                        <h2>Endpoints Overview</h2>
                        
                        <div class="table-responsive">
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th>Method</th>
                                        <th>Endpoint</th>
                                        <th>Description</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><span class="method-badge method-get">GET</span></td>
                                        <td><code>/health</code></td>
                                        <td>Health check endpoint</td>
                                    </tr>
                                    <tr>
                                        <td><span class="method-badge method-get">GET</span></td>
                                        <td><code>/api/data</code></td>
                                        <td>Get FX data with optional filters</td>
                                    </tr>
                                    <tr>
                                        <td><span class="method-badge method-get">GET</span></td>
                                        <td><code>/api/summary</code></td>
                                        <td>Get summary statistics</td>
                                    </tr>
                                    <tr>
                                        <td><span class="method-badge method-get">GET</span></td>
                                        <td><code>/api/risk</code></td>
                                        <td>Get risk metrics (VaR, volatility, etc.)</td>
                                    </tr>
                                    <tr>
                                        <td><span class="method-badge method-get">GET</span></td>
                                        <td><code>/api/forecast</code></td>
                                        <td>Get forecasts</td>
                                    </tr>
                                    <tr>
                                        <td><span class="method-badge method-get">GET</span></td>
                                        <td><code>/api/anomalies</code></td>
                                        <td>Get anomaly detection results</td>
                                    </tr>
                                    <tr>
                                        <td><span class="method-badge method-get">GET</span></td>
                                        <td><code>/api/dashboard</code></td>
                                        <td>Get real-time dashboard data</td>
                                    </tr>
                                    <tr>
                                        <td><span class="method-badge method-post">POST</span></td>
                                        <td><code>/api/data</code></td>
                                        <td>Submit new data</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </section>

                    <!-- Data Endpoints -->
                    <section id="data" class="mb-5">
                        <h2>Data Endpoints</h2>

                        <!-- GET /api/data -->
                        <div class="card endpoint-card">
                            <div class="card-header">
                                <span class="method-badge method-get">GET</span>
                                <strong>/api/data</strong>
                            </div>
                            <div class="card-body">
                                <p>Retrieve FX data with optional filtering parameters.</p>
                                
                                <h6>Query Parameters</h6>
                                <ul>
                                    <li><code>institution</code> (optional) - Filter by institution name</li>
                                    <li><code>modality</code> (optional) - Filter by modality (Spot, Forward, Swap, Options)</li>
                                    <li><code>start_date</code> (optional) - Start date (YYYY-MM-DD)</li>
                                    <li><code>end_date</code> (optional) - End date (YYYY-MM-DD)</li>
                                </ul>

                                <h6>Example Request</h6>
                                <div class="code-block">
                                    <code>GET /api/data?institution=Bank_Alpha&modality=Spot&start_date=2024-01-01</code>
                                </div>

                                <h6>Example Response</h6>
                                <div class="code-block">
<pre><code class="language-json">{
  "success": true,
  "data": [
    {
      "date": "2024-01-01",
      "institution": "Bank_Alpha",
      "modality": "Spot",
      "value": 125000
    }
  ],
  "count": 1,
  "timestamp": "2024-01-15T10:30:00Z"
}</code></pre>
                                </div>
                            </div>
                        </div>

                        <!-- POST /api/data -->
                        <div class="card endpoint-card">
                            <div class="card-header">
                                <span class="method-badge method-post">POST</span>
                                <strong>/api/data</strong>
                            </div>
                            <div class="card-body">
                                <p>Submit new FX data records.</p>
                                
                                <h6>Request Body</h6>
                                <div class="code-block">
<pre><code class="language-json">[
  {
    "date": "2024-01-15",
    "institution": "Bank_Alpha",
    "modality": "Spot",
    "value": 130000
  }
]</code></pre>
                                </div>

                                <h6>Response</h6>
                                <div class="code-block">
<pre><code class="language-json">{
  "success": true,
  "message": "Data received successfully",
  "records": 1,
  "timestamp": "2024-01-15T10:30:00Z"
}</code></pre>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Analytics Endpoints -->
                    <section id="analytics" class="mb-5">
                        <h2>Analytics Endpoints</h2>

                        <!-- GET /api/risk -->
                        <div class="card endpoint-card">
                            <div class="card-header">
                                <span class="method-badge method-get">GET</span>
                                <strong>/api/risk</strong>
                            </div>
                            <div class="card-body">
                                <p>Get risk metrics including VaR, Expected Shortfall, and volatility.</p>
                                
                                <h6>Query Parameters</h6>
                                <ul>
                                    <li><code>confidence</code> (optional, default: 0.95) - Confidence level for VaR</li>
                                    <li><code>method</code> (optional, default: "historical") - VaR calculation method</li>
                                </ul>

                                <h6>Example Response</h6>
                                <div class="code-block">
<pre><code class="language-json">{
  "success": true,
  "data": [
    {
      "institution": "Bank_Alpha",
      "modality": "Spot",
      "var": -0.0234,
      "expected_shortfall": -0.0312,
      "volatility": 0.0156,
      "sharpe_ratio": 1.23
    }
  ],
  "parameters": {
    "confidence": 0.95,
    "method": "historical"
  }
}</code></pre>
                                </div>
                            </div>
                        </div>

                        <!-- GET /api/forecast -->
                        <div class="card endpoint-card">
                            <div class="card-header">
                                <span class="method-badge method-get">GET</span>
                                <strong>/api/forecast</strong>
                            </div>
                            <div class="card-body">
                                <p>Get time series forecasts with confidence intervals.</p>
                                
                                <h6>Query Parameters</h6>
                                <ul>
                                    <li><code>periods</code> (optional, default: 6) - Number of periods to forecast</li>
                                    <li><code>method</code> (optional, default: "ensemble") - Forecasting method</li>
                                </ul>

                                <h6>Available Methods</h6>
                                <ul>
                                    <li><code>ensemble</code> - Combination of multiple methods</li>
                                    <li><code>ma</code> - Moving average</li>
                                    <li><code>es</code> - Exponential smoothing</li>
                                    <li><code>trend</code> - Linear trend</li>
                                </ul>
                            </div>
                        </div>
                    </section>

                    <!-- Examples -->
                    <section id="examples" class="mb-5">
                        <h2>Usage Examples</h2>

                        <h4>JavaScript/Node.js</h4>
                        <div class="code-block">
<pre><code class="language-javascript">// Fetch data
const response = await fetch('http://localhost:8000/api/data?institution=Bank_Alpha');
const data = await response.json();

// Submit new data
const newData = [{
  date: '2024-01-15',
  institution: 'Bank_Alpha',
  modality: 'Spot',
  value: 130000
}];

await fetch('http://localhost:8000/api/data', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify(newData)
});</code></pre>
                        </div>

                        <h4>Python</h4>
                        <div class="code-block">
<pre><code class="language-python">import requests

# Get risk metrics
response = requests.get('http://localhost:8000/api/risk', 
                       params={'confidence': 0.99, 'method': 'parametric'})
risk_data = response.json()

# Get forecast
forecast = requests.get('http://localhost:8000/api/forecast',
                       params={'periods': 12, 'method': 'ensemble'})
forecast_data = forecast.json()</code></pre>
                        </div>

                        <h4>R</h4>
                        <div class="code-block">
<pre><code class="language-r"># Using the built-in API client
source("R/api_endpoints.R")
client <- create_api_client("http://localhost:8000")

# Get data
data <- client$get_data(institution = "Bank_Alpha")

# Get risk metrics
risk <- client$get_risk(confidence = 0.95, method = "historical")</code></pre>
                        </div>
                    </section>

                    <!-- Error Handling -->
                    <section id="errors" class="mb-5">
                        <h2>Error Handling</h2>
                        
                        <p>The API uses standard HTTP status codes and returns error information in JSON format.</p>

                        <h4>Error Response Format</h4>
                        <div class="code-block">
<pre><code class="language-json">{
  "success": false,
  "error": "Error description",
  "timestamp": "2024-01-15T10:30:00Z"
}</code></pre>
                        </div>

                        <h4>Common Status Codes</h4>
                        <ul>
                            <li><code>200</code> - Success</li>
                            <li><code>400</code> - Bad Request (invalid parameters)</li>
                            <li><code>404</code> - Not Found</li>
                            <li><code>500</code> - Internal Server Error</li>
                        </ul>
                    </section>

                    <!-- SDKs -->
                    <section id="sdks" class="mb-5">
                        <h2>SDKs and Libraries</h2>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-body">
                                        <h5 class="card-title">R Client</h5>
                                        <p>Built-in R client functions available in the project.</p>
                                        <code>source("R/api_endpoints.R")</code>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-body">
                                        <h5 class="card-title">Python Client</h5>
                                        <p>Use standard HTTP libraries like <code>requests</code> or <code>httpx</code>.</p>
                                        <code>pip install requests</code>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    
                    // Update active nav link
                    document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));
                    this.classList.add('active');
                }
            });
        });

        // Update active nav link on scroll
        window.addEventListener('scroll', function() {
            const sections = document.querySelectorAll('section[id]');
            const navLinks = document.querySelectorAll('.nav-link');
            
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop - 100;
                if (window.pageYOffset >= sectionTop) {
                    current = section.getAttribute('id');
                }
            });
            
            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === '#' + current) {
                    link.classList.add('active');
                }
            });
        });
    </script>
</body>
</html>
